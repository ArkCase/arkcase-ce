---
- hosts: localhost
  roles:
    - pki-aws-client
    - mariadb-client
    - alfresco-setup
    - alfresco-ce
#    - ldap
    - alfresco

  vars_prompt:
    - name: root_folder
      prompt: Root folder
      private: no
      default: /opt/app

    - name: ssl_ca
      prompt: Full path to root cert
      private: no

    - name: ssl_intermediate_cert
      prompt: Full path to intermediate cert
      private: no

    - name: mariadb_jdbc_version
      prompt: MariaDB JDBC Driver version
      private: no
      default: 2.2.5

    - name: database_host_name
      prompt: Database host name
      private: no

    - name: rds_password
      prompt: Database root user password
      private: yes

    - name: alfresco_content_services_version
      prompt: Alfresco Content Services CE version
      private: no
      default: 6.0.7-ga

    - name: alfresco_records_management_version
      prompt: Alfresco Governance Services CE version
      private: no
      default: 3.0.a

    - name: alfresco_release_name
      prompt: Alfresco Content Services CE release name
      private: no
      default: 201806-GA

    - name: alfresco_build_number
      prompt: Alfresco build number (needed to construct the download URL)
      private: no
      default: -build-00113

    - name: server_admin
      prompt: Email address of the server administrator
      private: no
      default: david.miller@arkcase.com

    - name: internal_host
      prompt: internal host name, usually same as hostname command
      private: no

    - name: alfresco_host
      prompt: direct alfresco host name, usually same as hostname command
      private: no

    - name: activemq_host
      prompt: ActiveMQ host name
      private: no

    - name: enable_rma
      prompt: Will Records Management will be used?
      private: no
      default: true

    - name: enable_alfresco_sync
      prompt: Will Alfresco will be used outside of ArkCase?
      private: no
      default: false

    - name: default_database_password
      prompt: Password to use for the Alfresco database schema
      private: yes

    - name: ldap_url
      prompt: URL to the LDAP server
      private: no

    - name: ldap_bind_user
      prompt: distinguished name of the LDAP bind user
      private: no

    - name: ldap_bind_password
      prompt: LDAP bind user's password
      private: yes

    - name: ldap_group_base
      prompt: LDAP group base
      private: no

    - name: ldap_user_base
      prompt: LDAP user base
      private: no

    - name: active_directory_domain
      prompt: Active Directory domain name
      private: no

    - name: external_host
      prompt: Host name to appear in the browser URL
      private: no
    
