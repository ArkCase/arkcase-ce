- name: enable firewall
  become: yes
  service:
    name: firewalld
    state: started

- name: Expose ArkCase app port
  become: yes
  firewalld:
    port: "{{ item }}"
    permanent: true
    state: enabled
    immediate: yes
  register: arkcase_ports
  loop:
    - "7070/tcp"   # alfresco
    - "443/tcp"    # httpd
    - "2002/tcp"   # pentaho
    - "8983/tcp"   # solr
    - "8843/tcp"   # arkcase
    - "8680/tcp"   # snowbound

- name: Reload firewalld
  become: yes
  command: firewall-cmd --reload
  when: arkcase_ports is changed

