- name: restore config files 
  become: yes
  become_user: arkcase
  command: cp {{ config_backup_folder_path }}/acm/{{ item }} {{ root_folder }}/data/arkcase-home/.arkcase/acm/{{ item }}
  loop:
    - "acm-config-server-repo/arkcase-runtime.yaml"
    - "acmSequenceConfiguration.json"

- name: restore branding files 
  become: yes
  become_user: arkcase
  command: cp {{ config_backup_folder_path }}/acm/acm-config-server-repo/branding/{{ item }} {{ root_folder }}/data/arkcase-home/.arkcase/acm/acm-config-server-repo/branding/{{ item }}
  loop:
    - "email-logo-runtime.png"
    - "header-logo-runtime.png"
    - "login-logo-runtime.png"
    - "custom-runtime.css"
  ignore_errors: true
  
- name: start config server
  become: yes
  systemd:
    name: "config-server"
    state: started

- name: wait for config server
  wait_for:
    connect_timeout: 15
    delay: 5
    port: 9999

- name: start arkcase
  become: yes
  systemd:
    name: "arkcase"
    state: started
