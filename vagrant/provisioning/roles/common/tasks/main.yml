- name: install required packages
  become: yes
  yum:
    state: installed
    name: 
      - java-1.8.0-openjdk
      - java-1.8.0-openjdk-devel
      - policycoreutils-python
      - zip
      - unzip
      - git
      - net-tools
      - python-pip

- name: remove python2-passlib since it breaks solr password setting
  become: yes
  yum:
    state: absent
    name:
      - python2-passlib

- name: folder structure for app, data and logs
  become: yes
  file:
    path: "{{ item }}"
    state: directory
  loop:
    - /opt
    - /opt/app
    - /opt/data
    - /opt/log
    - /opt/install
    - /opt/common
    - /opt/tmp

- name: add arkcase-ce.local to hosts file
  become: yes
  lineinfile:
    path: /etc/hosts
    line: "{{ item }}"
  loop:
    - "127.0.0.1 arkcase-ce.local"
    - "127.0.0.1 arkcase-host"
    - "127.0.0.1 acm-activemq"
    

