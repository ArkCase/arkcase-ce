- name: apacheds user
  become: yes
  user:
    name: apacheds
    shell: /bin/false
    state: present

- name: apacheds folders
  become: yes
  file:
    path: "{{ item }}"
    state: directory
    group: apacheds
    owner: apacheds
  with_items:
    - /opt/data/apacheds
    - /opt/log/apacheds
    - /opt/app/apacheds
    - /opt/app/install/apacheds
  register: apacheds_folder_structure

- name: enable logrotate for apacheds log folder if necessary
  include_tasks: "{{ role_path }}/../common/tasks/logrotate.yml"
  with_items:
    - apacheds

